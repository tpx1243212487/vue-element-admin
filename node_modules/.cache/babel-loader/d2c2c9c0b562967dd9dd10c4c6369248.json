{"remainingRequest":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\thread-loader\\dist\\cjs.js!E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js!E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\data\\git\\vue-admin\\vue-element-admin\\src\\components\\ImageCropper\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\src\\components\\ImageCropper\\index.vue","mtime":1636272798135},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\babel.config.js","mtime":1636272798083},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KJ3VzZSBzdHJpY3QnOwoKaW1wb3J0IF90eXBlb2YgZnJvbSAiRTovZGF0YS9naXQvdnVlLWFkbWluL3Z1ZS1lbGVtZW50LWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0IHJlcXVlc3QgZnJvbSAnQC91dGlscy9yZXF1ZXN0JzsKaW1wb3J0IGxhbmd1YWdlIGZyb20gJy4vdXRpbHMvbGFuZ3VhZ2UuanMnOwppbXBvcnQgbWltZXMgZnJvbSAnLi91dGlscy9taW1lcy5qcyc7CmltcG9ydCBkYXRhMmJsb2IgZnJvbSAnLi91dGlscy9kYXRhMmJsb2IuanMnOwppbXBvcnQgZWZmZWN0UmlwcGxlIGZyb20gJy4vdXRpbHMvZWZmZWN0UmlwcGxlLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICAvLyDln5/vvIzkuIrkvKDmlofku7ZuYW1l77yM6Kem5Y+R5LqL5Lu25Lya5bim5LiK77yI5aaC5p6c5LiA5Liq6aG16Z2i5aSa5Liq5Zu+54mH5LiK5Lyg5o6n5Lu277yM5Y+v5Lul5YGa5Yy65YiGCiAgICBmaWVsZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdhdmF0YXInCiAgICB9LAogICAgLy8g5Y6f5ZCNa2V577yM57G75Ly85LqOaWTvvIzop6blj5Hkuovku7bkvJrluKbkuIrvvIjlpoLmnpzkuIDkuKrpobXpnaLlpJrkuKrlm77niYfkuIrkvKDmjqfku7bvvIzlj6/ku6XlgZrljLrliIYKICAgIGtpOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIC8vIOaYvuekuuivpeaOp+S7tuS4juWQpgogICAgdmFsdWU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIC8vIOS4iuS8oOWcsOWdgAogICAgdXJsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICAvLyDlhbbku5bopoHkuIrkvKDmlofku7bpmYTluKbnmoTmlbDmja7vvIzlr7nosaHmoLzlvI8KICAgIHBhcmFtczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICAvLyBBZGQgY3VzdG9tIGhlYWRlcnMKICAgIGhlYWRlcnM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgLy8g5Ymq6KOB5Zu+54mH55qE5a69CiAgICB3aWR0aDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDIwMAogICAgfSwKICAgIC8vIOWJquijgeWbvueJh+eahOmrmAogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMjAwCiAgICB9LAogICAgLy8g5LiN5pi+56S65peL6L2s5Yqf6IO9CiAgICBub1JvdGF0ZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgLy8g5LiN6aKE6KeI5ZyG5b2i5Zu+54mHCiAgICBub0NpcmNsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIC8vIOS4jemihOiniOaWueW9ouWbvueJhwogICAgbm9TcXVhcmU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICAvLyDljZXmlofku7blpKflsI/pmZDliLYKICAgIG1heFNpemU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxMDI0MAogICAgfSwKICAgIC8vIOivreiogOexu+WeiwogICAgbGFuZ1R5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnemgnCiAgICB9LAogICAgLy8g6K+t6KiA5YyFCiAgICBsYW5nRXh0OiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIC8vIOWbvueJh+S4iuS8oOagvOW8jwogICAgaW1nRm9ybWF0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ3BuZycKICAgIH0sCiAgICAvLyDmmK/lkKbmlK/mjIHot6jln58KICAgIHdpdGhDcmVkZW50aWFsczogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBpbWdGb3JtYXQgPSB0aGlzLmltZ0Zvcm1hdCwKICAgICAgICBsYW5nVHlwZSA9IHRoaXMubGFuZ1R5cGUsCiAgICAgICAgbGFuZ0V4dCA9IHRoaXMubGFuZ0V4dCwKICAgICAgICB3aWR0aCA9IHRoaXMud2lkdGgsCiAgICAgICAgaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7CiAgICB2YXIgaXNTdXBwb3J0ZWQgPSB0cnVlOwogICAgdmFyIGFsbG93SW1nRm9ybWF0ID0gWydqcGcnLCAncG5nJ107CiAgICB2YXIgdGVtcEltZ0Zvcm1hdCA9IGFsbG93SW1nRm9ybWF0LmluZGV4T2YoaW1nRm9ybWF0KSA9PT0gLTEgPyAnanBnJyA6IGltZ0Zvcm1hdDsKICAgIHZhciBsYW5nID0gbGFuZ3VhZ2VbbGFuZ1R5cGVdID8gbGFuZ3VhZ2VbbGFuZ1R5cGVdIDogbGFuZ3VhZ2VbJ2VuJ107CiAgICB2YXIgbWltZSA9IG1pbWVzW3RlbXBJbWdGb3JtYXRdOyAvLyDop4TojIPlm77niYfmoLzlvI8KCiAgICB0aGlzLmltZ0Zvcm1hdCA9IHRlbXBJbWdGb3JtYXQ7CgogICAgaWYgKGxhbmdFeHQpIHsKICAgICAgT2JqZWN0LmFzc2lnbihsYW5nLCBsYW5nRXh0KTsKICAgIH0KCiAgICBpZiAodHlwZW9mIEZvcm1EYXRhICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIGlzU3VwcG9ydGVkID0gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgLy8g5Zu+54mH55qEbWltZQogICAgICBtaW1lOiBtaW1lLAogICAgICAvLyDor63oqIDljIUKICAgICAgbGFuZzogbGFuZywKICAgICAgLy8g5rWP6KeI5Zmo5piv5ZCm5pSv5oyB6K+l5o6n5Lu2CiAgICAgIGlzU3VwcG9ydGVkOiBpc1N1cHBvcnRlZCwKICAgICAgLy8g5rWP6KeI5Zmo5piv5ZCm5pSv5oyB6Kem5bGP5LqL5Lu2CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKICAgICAgaXNTdXBwb3J0VG91Y2g6IGRvY3VtZW50Lmhhc093blByb3BlcnR5KCdvbnRvdWNoc3RhcnQnKSwKICAgICAgLy8g5q2l6aqkCiAgICAgIHN0ZXA6IDEsCiAgICAgIC8vIDHpgInmi6nmlofku7YgMuWJquijgSAz5LiK5LygCiAgICAgIC8vIOS4iuS8oOeKtuaAgeWPiui/m+W6pgogICAgICBsb2FkaW5nOiAwLAogICAgICAvLyAw5pyq5byA5aeLIDHmraPlnKggMuaIkOWKnyAz6ZSZ6K+vCiAgICAgIHByb2dyZXNzOiAwLAogICAgICAvLyDmmK/lkKbmnInplJnor6/lj4rplJnor6/kv6Hmga8KICAgICAgaGFzRXJyb3I6IGZhbHNlLAogICAgICBlcnJvck1zZzogJycsCiAgICAgIC8vIOmcgOaxguWbvuWuvemrmOavlAogICAgICByYXRpbzogd2lkdGggLyBoZWlnaHQsCiAgICAgIC8vIOWOn+WbvuWcsOWdgOOAgeeUn+aIkOWbvueJh+WcsOWdgAogICAgICBzb3VyY2VJbWc6IG51bGwsCiAgICAgIHNvdXJjZUltZ1VybDogJycsCiAgICAgIGNyZWF0ZUltZ1VybDogJycsCiAgICAgIC8vIOWOn+WbvueJh+aLluWKqOS6i+S7tuWIneWni+WAvAogICAgICBzb3VyY2VJbWdNb3VzZURvd246IHsKICAgICAgICBvbjogZmFsc2UsCiAgICAgICAgbVg6IDAsCiAgICAgICAgLy8g6byg5qCH5oyJ5LiL55qE5Z2Q5qCHCiAgICAgICAgbVk6IDAsCiAgICAgICAgeDogMCwKICAgICAgICAvLyBzY2FsZeWOn+WbvuWdkOaghwogICAgICAgIHk6IDAKICAgICAgfSwKICAgICAgLy8g55Sf5oiQ5Zu+54mH6aKE6KeI55qE5a655Zmo5aSn5bCPCiAgICAgIHByZXZpZXdDb250YWluZXI6IHsKICAgICAgICB3aWR0aDogMTAwLAogICAgICAgIGhlaWdodDogMTAwCiAgICAgIH0sCiAgICAgIC8vIOWOn+WbvuWuueWZqOWuvemrmAogICAgICBzb3VyY2VJbWdDb250YWluZXI6IHsKICAgICAgICAvLyBzaWMKICAgICAgICB3aWR0aDogMjQwLAogICAgICAgIGhlaWdodDogMTg0IC8vIOWmguaenOeUn+aIkOWbvuavlOS+i+S4juatpOS4gOiHtOS8muWHuueOsGJ1Z++8jOWFiOaUueaIkOeJueauiueahOagvOW8j+WQp++8jOWTiOWTiOWTiAoKICAgICAgfSwKICAgICAgLy8g5Y6f5Zu+5bGV56S65bGe5oCnCiAgICAgIHNjYWxlOiB7CiAgICAgICAgem9vbUFkZE9uOiBmYWxzZSwKICAgICAgICAvLyDmjInpkq7nvKnmlL7kuovku7blvIDlkK8KICAgICAgICB6b29tU3ViT246IGZhbHNlLAogICAgICAgIC8vIOaMiemSrue8qeaUvuS6i+S7tuW8gOWQrwogICAgICAgIHJhbmdlOiAxLAogICAgICAgIC8vIOacgOWkpzEwMAogICAgICAgIHJvdGF0ZUxlZnQ6IGZhbHNlLAogICAgICAgIC8vIOaMiemSruWQkeW3puaXi+i9rOS6i+S7tuW8gOWQrwogICAgICAgIHJvdGF0ZVJpZ2h0OiBmYWxzZSwKICAgICAgICAvLyDmjInpkq7lkJHlj7Pml4vovazkuovku7blvIDlkK8KICAgICAgICBkZWdyZWU6IDAsCiAgICAgICAgLy8g5peL6L2s5bqm5pWwCiAgICAgICAgeDogMCwKICAgICAgICB5OiAwLAogICAgICAgIHdpZHRoOiAwLAogICAgICAgIGhlaWdodDogMCwKICAgICAgICBtYXhXaWR0aDogMCwKICAgICAgICBtYXhIZWlnaHQ6IDAsCiAgICAgICAgbWluV2lkdGg6IDAsCiAgICAgICAgLy8g5pyA5a69CiAgICAgICAgbWluSGVpZ2h0OiAwLAogICAgICAgIG5hdHVyYWxXaWR0aDogMCwKICAgICAgICAvLyDljp/lrr0KICAgICAgICBuYXR1cmFsSGVpZ2h0OiAwCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLy8g6L+b5bqm5p2h5qC35byPCiAgICBwcm9ncmVzc1N0eWxlOiBmdW5jdGlvbiBwcm9ncmVzc1N0eWxlKCkgewogICAgICB2YXIgcHJvZ3Jlc3MgPSB0aGlzLnByb2dyZXNzOwogICAgICByZXR1cm4gewogICAgICAgIHdpZHRoOiBwcm9ncmVzcyArICclJwogICAgICB9OwogICAgfSwKICAgIC8vIOWOn+Wbvuagt+W8jwogICAgc291cmNlSW1nU3R5bGU6IGZ1bmN0aW9uIHNvdXJjZUltZ1N0eWxlKCkgewogICAgICB2YXIgc2NhbGUgPSB0aGlzLnNjYWxlLAogICAgICAgICAgc291cmNlSW1nTWFza2luZyA9IHRoaXMuc291cmNlSW1nTWFza2luZzsKICAgICAgdmFyIHRvcCA9IHNjYWxlLnkgKyBzb3VyY2VJbWdNYXNraW5nLnkgKyAncHgnOwogICAgICB2YXIgbGVmdCA9IHNjYWxlLnggKyBzb3VyY2VJbWdNYXNraW5nLnggKyAncHgnOwogICAgICByZXR1cm4gewogICAgICAgIHRvcDogdG9wLAogICAgICAgIGxlZnQ6IGxlZnQsCiAgICAgICAgd2lkdGg6IHNjYWxlLndpZHRoICsgJ3B4JywKICAgICAgICBoZWlnaHQ6IHNjYWxlLmhlaWdodCArICdweCcsCiAgICAgICAgdHJhbnNmb3JtOiAncm90YXRlKCcgKyBzY2FsZS5kZWdyZWUgKyAnZGVnKScsCiAgICAgICAgLy8g5peL6L2s5pe2IOW3puS+p+WOn+Wni+WbvuaXi+i9rOagt+W8jwogICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgc2NhbGUuZGVncmVlICsgJ2RlZyknLAogICAgICAgIC8vIOWFvOWuuUlFOQogICAgICAgICctbW96LXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIHNjYWxlLmRlZ3JlZSArICdkZWcpJywKICAgICAgICAvLyDlhbzlrrlGaXJlRm94CiAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgc2NhbGUuZGVncmVlICsgJ2RlZyknLAogICAgICAgIC8vIOWFvOWuuVNhZmFyaSDlkowgY2hyb21lCiAgICAgICAgJy1vLXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIHNjYWxlLmRlZ3JlZSArICdkZWcpJyAvLyDlhbzlrrkgT3BlcmEKCiAgICAgIH07CiAgICB9LAogICAgLy8g5Y6f5Zu+6JKZ54mI5bGe5oCnCiAgICBzb3VyY2VJbWdNYXNraW5nOiBmdW5jdGlvbiBzb3VyY2VJbWdNYXNraW5nKCkgewogICAgICB2YXIgd2lkdGggPSB0aGlzLndpZHRoLAogICAgICAgICAgaGVpZ2h0ID0gdGhpcy5oZWlnaHQsCiAgICAgICAgICByYXRpbyA9IHRoaXMucmF0aW8sCiAgICAgICAgICBzb3VyY2VJbWdDb250YWluZXIgPSB0aGlzLnNvdXJjZUltZ0NvbnRhaW5lcjsKICAgICAgdmFyIHNpYyA9IHNvdXJjZUltZ0NvbnRhaW5lcjsKICAgICAgdmFyIHNpY1JhdGlvID0gc2ljLndpZHRoIC8gc2ljLmhlaWdodDsgLy8g5Y6f5Zu+5a655Zmo5a696auY5q+UCgogICAgICB2YXIgeCA9IDA7CiAgICAgIHZhciB5ID0gMDsKICAgICAgdmFyIHcgPSBzaWMud2lkdGg7CiAgICAgIHZhciBoID0gc2ljLmhlaWdodDsKICAgICAgdmFyIHNjYWxlID0gMTsKCiAgICAgIGlmIChyYXRpbyA8IHNpY1JhdGlvKSB7CiAgICAgICAgc2NhbGUgPSBzaWMuaGVpZ2h0IC8gaGVpZ2h0OwogICAgICAgIHcgPSBzaWMuaGVpZ2h0ICogcmF0aW87CiAgICAgICAgeCA9IChzaWMud2lkdGggLSB3KSAvIDI7CiAgICAgIH0KCiAgICAgIGlmIChyYXRpbyA+IHNpY1JhdGlvKSB7CiAgICAgICAgc2NhbGUgPSBzaWMud2lkdGggLyB3aWR0aDsKICAgICAgICBoID0gc2ljLndpZHRoIC8gcmF0aW87CiAgICAgICAgeSA9IChzaWMuaGVpZ2h0IC0gaCkgLyAyOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIHNjYWxlOiBzY2FsZSwKICAgICAgICAvLyDokpnniYjnm7jlr7npnIDmsYLlrr3pq5jnmoTnvKnmlL4KICAgICAgICB4OiB4LAogICAgICAgIHk6IHksCiAgICAgICAgd2lkdGg6IHcsCiAgICAgICAgaGVpZ2h0OiBoCiAgICAgIH07CiAgICB9LAogICAgLy8g5Y6f5Zu+6YGu572p5qC35byPCiAgICBzb3VyY2VJbWdTaGFkZVN0eWxlOiBmdW5jdGlvbiBzb3VyY2VJbWdTaGFkZVN0eWxlKCkgewogICAgICB2YXIgc291cmNlSW1nTWFza2luZyA9IHRoaXMuc291cmNlSW1nTWFza2luZywKICAgICAgICAgIHNvdXJjZUltZ0NvbnRhaW5lciA9IHRoaXMuc291cmNlSW1nQ29udGFpbmVyOwogICAgICB2YXIgc2ljID0gc291cmNlSW1nQ29udGFpbmVyOwogICAgICB2YXIgc2ltID0gc291cmNlSW1nTWFza2luZzsKICAgICAgdmFyIHcgPSBzaW0ud2lkdGggPT09IHNpYy53aWR0aCA/IHNpbS53aWR0aCA6IChzaWMud2lkdGggLSBzaW0ud2lkdGgpIC8gMjsKICAgICAgdmFyIGggPSBzaW0uaGVpZ2h0ID09PSBzaWMuaGVpZ2h0ID8gc2ltLmhlaWdodCA6IChzaWMuaGVpZ2h0IC0gc2ltLmhlaWdodCkgLyAyOwogICAgICByZXR1cm4gewogICAgICAgIHdpZHRoOiB3ICsgJ3B4JywKICAgICAgICBoZWlnaHQ6IGggKyAncHgnCiAgICAgIH07CiAgICB9LAogICAgcHJldmlld1N0eWxlOiBmdW5jdGlvbiBwcmV2aWV3U3R5bGUoKSB7CiAgICAgIHZhciByYXRpbyA9IHRoaXMucmF0aW8sCiAgICAgICAgICBwcmV2aWV3Q29udGFpbmVyID0gdGhpcy5wcmV2aWV3Q29udGFpbmVyOwogICAgICB2YXIgcGMgPSBwcmV2aWV3Q29udGFpbmVyOwogICAgICB2YXIgdyA9IHBjLndpZHRoOwogICAgICB2YXIgaCA9IHBjLmhlaWdodDsKICAgICAgdmFyIHBjUmF0aW8gPSB3IC8gaDsKCiAgICAgIGlmIChyYXRpbyA8IHBjUmF0aW8pIHsKICAgICAgICB3ID0gcGMuaGVpZ2h0ICogcmF0aW87CiAgICAgIH0KCiAgICAgIGlmIChyYXRpbyA+IHBjUmF0aW8pIHsKICAgICAgICBoID0gcGMud2lkdGggLyByYXRpbzsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICB3aWR0aDogdyArICdweCcsCiAgICAgICAgaGVpZ2h0OiBoICsgJ3B4JwogICAgICB9OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShuZXdWYWx1ZSkgewogICAgICBpZiAobmV3VmFsdWUgJiYgdGhpcy5sb2FkaW5nICE9PSAxKSB7CiAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy8g57uR5a6a5oyJ6ZSuZXNj6ZqQ6JeP5q2k5o+S5Lu25LqL5Lu2CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuY2xvc2VIYW5kbGVyKTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmNsb3NlSGFuZGxlcik7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDngrnlh7vms6LnurnmlYjmnpwKICAgIHJpcHBsZTogZnVuY3Rpb24gcmlwcGxlKGUpIHsKICAgICAgZWZmZWN0UmlwcGxlKGUpOwogICAgfSwKICAgIC8vIOWFs+mXreaOp+S7tgogICAgb2ZmOiBmdW5jdGlvbiBvZmYoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy4kZW1pdCgnaW5wdXQnLCBmYWxzZSk7CgogICAgICAgIF90aGlzLiRlbWl0KCdjbG9zZScpOwoKICAgICAgICBpZiAoX3RoaXMuc3RlcCA9PT0gMyAmJiBfdGhpcy5sb2FkaW5nID09PSAyKSB7CiAgICAgICAgICBfdGhpcy5zZXRTdGVwKDEpOwogICAgICAgIH0KICAgICAgfSwgMjAwKTsKICAgIH0sCiAgICAvLyDorr7nva7mraXpqqQKICAgIHNldFN0ZXA6IGZ1bmN0aW9uIHNldFN0ZXAobm8pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvLyDlu7bml7bmmK/kuLrkuobmmL7npLrliqjnlLvmlYjmnpzlkaLvvIzlk4jlk4jlk4gKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLnN0ZXAgPSBubzsKICAgICAgfSwgMjAwKTsKICAgIH0sCgogICAgLyog5Zu+54mH6YCJ5oup5Yy65Z+f5Ye95pWw57uR5a6aDQogICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCiAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkgewogICAgICBpZiAodGhpcy5sb2FkaW5nICE9PSAxKSB7CiAgICAgICAgaWYgKGUudGFyZ2V0ICE9PSB0aGlzLiRyZWZzLmZpbGVpbnB1dCkgewogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSB0aGlzLiRyZWZzKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuZmlsZWlucHV0LmNsaWNrKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICBpZiAodGhpcy5sb2FkaW5nICE9PSAxKSB7CiAgICAgICAgdmFyIGZpbGVzID0gZS50YXJnZXQuZmlsZXMgfHwgZS5kYXRhVHJhbnNmZXIuZmlsZXM7CiAgICAgICAgdGhpcy5yZXNldCgpOwoKICAgICAgICBpZiAodGhpcy5jaGVja0ZpbGUoZmlsZXNbMF0pKSB7CiAgICAgICAgICB0aGlzLnNldFNvdXJjZUltZyhmaWxlc1swXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCiAgICAvLyDmo4DmtYvpgInmi6nnmoTmlofku7bmmK/lkKblkIjpgIIKICAgIGNoZWNrRmlsZTogZnVuY3Rpb24gY2hlY2tGaWxlKGZpbGUpIHsKICAgICAgdmFyIGxhbmcgPSB0aGlzLmxhbmcsCiAgICAgICAgICBtYXhTaXplID0gdGhpcy5tYXhTaXplOyAvLyDku4XpmZDlm77niYcKCiAgICAgIGlmIChmaWxlLnR5cGUuaW5kZXhPZignaW1hZ2UnKSA9PT0gLTEpIHsKICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yTXNnID0gbGFuZy5lcnJvci5vbmx5SW1nOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSAvLyDotoXlh7rlpKflsI8KCgogICAgICBpZiAoZmlsZS5zaXplIC8gMTAyNCA+IG1heFNpemUpIHsKICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yTXNnID0gbGFuZy5lcnJvci5vdXRPZlNpemUgKyBtYXhTaXplICsgJ2tiJzsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIC8vIOmHjee9ruaOp+S7tgogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSAwOwogICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7CiAgICAgIHRoaXMuZXJyb3JNc2cgPSAnJzsKICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7CiAgICB9LAogICAgLy8g6K6+572u5Zu+54mH5rqQCiAgICBzZXRTb3VyY2VJbWc6IGZ1bmN0aW9uIHNldFNvdXJjZUltZyhmaWxlKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGZyID0gbmV3IEZpbGVSZWFkZXIoKTsKCiAgICAgIGZyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXMzLnNvdXJjZUltZ1VybCA9IGZyLnJlc3VsdDsKCiAgICAgICAgX3RoaXMzLnN0YXJ0Q3JvcCgpOwogICAgICB9OwoKICAgICAgZnIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgIH0sCiAgICAvLyDliaroo4HliY3lh4blpIflt6XkvZwKICAgIHN0YXJ0Q3JvcDogZnVuY3Rpb24gc3RhcnRDcm9wKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciB3aWR0aCA9IHRoaXMud2lkdGgsCiAgICAgICAgICBoZWlnaHQgPSB0aGlzLmhlaWdodCwKICAgICAgICAgIHJhdGlvID0gdGhpcy5yYXRpbywKICAgICAgICAgIHNjYWxlID0gdGhpcy5zY2FsZSwKICAgICAgICAgIHNvdXJjZUltZ1VybCA9IHRoaXMuc291cmNlSW1nVXJsLAogICAgICAgICAgc291cmNlSW1nTWFza2luZyA9IHRoaXMuc291cmNlSW1nTWFza2luZywKICAgICAgICAgIGxhbmcgPSB0aGlzLmxhbmc7CiAgICAgIHZhciBzaW0gPSBzb3VyY2VJbWdNYXNraW5nOwogICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgIGltZy5zcmMgPSBzb3VyY2VJbWdVcmw7CgogICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBuV2lkdGggPSBpbWcubmF0dXJhbFdpZHRoOwogICAgICAgIHZhciBuSGVpZ2h0ID0gaW1nLm5hdHVyYWxIZWlnaHQ7CiAgICAgICAgdmFyIG5SYXRpbyA9IG5XaWR0aCAvIG5IZWlnaHQ7CiAgICAgICAgdmFyIHcgPSBzaW0ud2lkdGg7CiAgICAgICAgdmFyIGggPSBzaW0uaGVpZ2h0OwogICAgICAgIHZhciB4ID0gMDsKICAgICAgICB2YXIgeSA9IDA7IC8vIOWbvueJh+WDj+e0oOS4jei+vuaghwoKICAgICAgICBpZiAobldpZHRoIDwgd2lkdGggfHwgbkhlaWdodCA8IGhlaWdodCkgewogICAgICAgICAgX3RoaXM0Lmhhc0Vycm9yID0gdHJ1ZTsKICAgICAgICAgIF90aGlzNC5lcnJvck1zZyA9IGxhbmcuZXJyb3IubG93ZXN0UHggKyB3aWR0aCArICcqJyArIGhlaWdodDsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmIChyYXRpbyA+IG5SYXRpbykgewogICAgICAgICAgaCA9IHcgLyBuUmF0aW87CiAgICAgICAgICB5ID0gKHNpbS5oZWlnaHQgLSBoKSAvIDI7CiAgICAgICAgfQoKICAgICAgICBpZiAocmF0aW8gPCBuUmF0aW8pIHsKICAgICAgICAgIHcgPSBoICogblJhdGlvOwogICAgICAgICAgeCA9IChzaW0ud2lkdGggLSB3KSAvIDI7CiAgICAgICAgfQoKICAgICAgICBzY2FsZS5yYW5nZSA9IDA7CiAgICAgICAgc2NhbGUueCA9IHg7CiAgICAgICAgc2NhbGUueSA9IHk7CiAgICAgICAgc2NhbGUud2lkdGggPSB3OwogICAgICAgIHNjYWxlLmhlaWdodCA9IGg7CiAgICAgICAgc2NhbGUuZGVncmVlID0gMDsKICAgICAgICBzY2FsZS5taW5XaWR0aCA9IHc7CiAgICAgICAgc2NhbGUubWluSGVpZ2h0ID0gaDsKICAgICAgICBzY2FsZS5tYXhXaWR0aCA9IG5XaWR0aCAqIHNpbS5zY2FsZTsKICAgICAgICBzY2FsZS5tYXhIZWlnaHQgPSBuSGVpZ2h0ICogc2ltLnNjYWxlOwogICAgICAgIHNjYWxlLm5hdHVyYWxXaWR0aCA9IG5XaWR0aDsKICAgICAgICBzY2FsZS5uYXR1cmFsSGVpZ2h0ID0gbkhlaWdodDsKICAgICAgICBfdGhpczQuc291cmNlSW1nID0gaW1nOwoKICAgICAgICBfdGhpczQuY3JlYXRlSW1nKCk7CgogICAgICAgIF90aGlzNC5zZXRTdGVwKDIpOwogICAgICB9OwogICAgfSwKICAgIC8vIOm8oOagh+aMieS4i+WbvueJh+WHhuWkh+enu+WKqAogICAgaW1nU3RhcnRNb3ZlOiBmdW5jdGlvbiBpbWdTdGFydE1vdmUoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIOaUr+aMgeinpuaRuOS6i+S7tu+8jOWImem8oOagh+S6i+S7tuaXoOaViAoKICAgICAgaWYgKHRoaXMuaXNTdXBwb3J0VG91Y2ggJiYgIWUudGFyZ2V0VG91Y2hlcykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdmFyIGV0ID0gZS50YXJnZXRUb3VjaGVzID8gZS50YXJnZXRUb3VjaGVzWzBdIDogZTsKICAgICAgdmFyIHNvdXJjZUltZ01vdXNlRG93biA9IHRoaXMuc291cmNlSW1nTW91c2VEb3duLAogICAgICAgICAgc2NhbGUgPSB0aGlzLnNjYWxlOwogICAgICB2YXIgc2ltZCA9IHNvdXJjZUltZ01vdXNlRG93bjsKICAgICAgc2ltZC5tWCA9IGV0LnNjcmVlblg7CiAgICAgIHNpbWQubVkgPSBldC5zY3JlZW5ZOwogICAgICBzaW1kLnggPSBzY2FsZS54OwogICAgICBzaW1kLnkgPSBzY2FsZS55OwogICAgICBzaW1kLm9uID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDpvKDmoIfmjInkuIvnirbmgIHkuIvnp7vliqjvvIzlm77niYfnp7vliqgKICAgIGltZ01vdmU6IGZ1bmN0aW9uIGltZ01vdmUoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIOaUr+aMgeinpuaRuOS6i+S7tu+8jOWImem8oOagh+S6i+S7tuaXoOaViAoKICAgICAgaWYgKHRoaXMuaXNTdXBwb3J0VG91Y2ggJiYgIWUudGFyZ2V0VG91Y2hlcykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdmFyIGV0ID0gZS50YXJnZXRUb3VjaGVzID8gZS50YXJnZXRUb3VjaGVzWzBdIDogZTsKICAgICAgdmFyIF90aGlzJHNvdXJjZUltZ01vdXNlRCA9IHRoaXMuc291cmNlSW1nTW91c2VEb3duLAogICAgICAgICAgb24gPSBfdGhpcyRzb3VyY2VJbWdNb3VzZUQub24sCiAgICAgICAgICBtWCA9IF90aGlzJHNvdXJjZUltZ01vdXNlRC5tWCwKICAgICAgICAgIG1ZID0gX3RoaXMkc291cmNlSW1nTW91c2VELm1ZLAogICAgICAgICAgeCA9IF90aGlzJHNvdXJjZUltZ01vdXNlRC54LAogICAgICAgICAgeSA9IF90aGlzJHNvdXJjZUltZ01vdXNlRC55LAogICAgICAgICAgc2NhbGUgPSB0aGlzLnNjYWxlLAogICAgICAgICAgc291cmNlSW1nTWFza2luZyA9IHRoaXMuc291cmNlSW1nTWFza2luZzsKICAgICAgdmFyIHNpbSA9IHNvdXJjZUltZ01hc2tpbmc7CiAgICAgIHZhciBuWCA9IGV0LnNjcmVlblg7CiAgICAgIHZhciBuWSA9IGV0LnNjcmVlblk7CiAgICAgIHZhciBkWCA9IG5YIC0gbVg7CiAgICAgIHZhciBkWSA9IG5ZIC0gbVk7CiAgICAgIHZhciByWCA9IHggKyBkWDsKICAgICAgdmFyIHJZID0geSArIGRZOwogICAgICBpZiAoIW9uKSByZXR1cm47CgogICAgICBpZiAoclggPiAwKSB7CiAgICAgICAgclggPSAwOwogICAgICB9CgogICAgICBpZiAoclkgPiAwKSB7CiAgICAgICAgclkgPSAwOwogICAgICB9CgogICAgICBpZiAoclggPCBzaW0ud2lkdGggLSBzY2FsZS53aWR0aCkgewogICAgICAgIHJYID0gc2ltLndpZHRoIC0gc2NhbGUud2lkdGg7CiAgICAgIH0KCiAgICAgIGlmIChyWSA8IHNpbS5oZWlnaHQgLSBzY2FsZS5oZWlnaHQpIHsKICAgICAgICByWSA9IHNpbS5oZWlnaHQgLSBzY2FsZS5oZWlnaHQ7CiAgICAgIH0KCiAgICAgIHNjYWxlLnggPSByWDsKICAgICAgc2NhbGUueSA9IHJZOwogICAgfSwKICAgIC8vIOaMiemSruaMieS4i+W8gOWni+WQkeWPs+aXi+i9rAogICAgc3RhcnRSb3RhdGVSaWdodDogZnVuY3Rpb24gc3RhcnRSb3RhdGVSaWdodChlKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIHNjYWxlID0gdGhpcy5zY2FsZTsKICAgICAgc2NhbGUucm90YXRlUmlnaHQgPSB0cnVlOwoKICAgICAgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIHJvdGF0ZSgpIHsKICAgICAgICBpZiAoc2NhbGUucm90YXRlUmlnaHQpIHsKICAgICAgICAgIHZhciBkZWdyZWUgPSArK3NjYWxlLmRlZ3JlZTsKCiAgICAgICAgICBfdGhpczUuY3JlYXRlSW1nKGRlZ3JlZSk7CgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJvdGF0ZSgpOwogICAgICAgICAgfSwgNjApOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHJvdGF0ZSgpOwogICAgfSwKICAgIC8vIOaMiemSruaMieS4i+W8gOWni+WQkeW3puaXi+i9rAogICAgc3RhcnRSb3RhdGVMZWZ0OiBmdW5jdGlvbiBzdGFydFJvdGF0ZUxlZnQoZSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHZhciBzY2FsZSA9IHRoaXMuc2NhbGU7CiAgICAgIHNjYWxlLnJvdGF0ZUxlZnQgPSB0cnVlOwoKICAgICAgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIHJvdGF0ZSgpIHsKICAgICAgICBpZiAoc2NhbGUucm90YXRlTGVmdCkgewogICAgICAgICAgdmFyIGRlZ3JlZSA9IC0tc2NhbGUuZGVncmVlOwoKICAgICAgICAgIF90aGlzNi5jcmVhdGVJbWcoZGVncmVlKTsKCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcm90YXRlKCk7CiAgICAgICAgICB9LCA2MCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgcm90YXRlKCk7CiAgICB9LAogICAgLy8g5YGc5q2i5peL6L2sCiAgICBlbmRSb3RhdGU6IGZ1bmN0aW9uIGVuZFJvdGF0ZSgpIHsKICAgICAgdmFyIHNjYWxlID0gdGhpcy5zY2FsZTsKICAgICAgc2NhbGUucm90YXRlTGVmdCA9IGZhbHNlOwogICAgICBzY2FsZS5yb3RhdGVSaWdodCA9IGZhbHNlOwogICAgfSwKICAgIC8vIOaMiemSruaMieS4i+W8gOWni+aUvuWkpwogICAgc3RhcnRab29tQWRkOiBmdW5jdGlvbiBzdGFydFpvb21BZGQoZSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBzY2FsZSA9IHRoaXMuc2NhbGU7CiAgICAgIHNjYWxlLnpvb21BZGRPbiA9IHRydWU7CgogICAgICB2YXIgem9vbSA9IGZ1bmN0aW9uIHpvb20oKSB7CiAgICAgICAgaWYgKHNjYWxlLnpvb21BZGRPbikgewogICAgICAgICAgdmFyIHJhbmdlID0gc2NhbGUucmFuZ2UgPj0gMTAwID8gMTAwIDogKytzY2FsZS5yYW5nZTsKCiAgICAgICAgICBfdGhpczcuem9vbUltZyhyYW5nZSk7CgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHpvb20oKTsKICAgICAgICAgIH0sIDYwKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB6b29tKCk7CiAgICB9LAogICAgLy8g5oyJ6ZKu5p2+5byA5oiW56e75byA5Y+W5raI5pS+5aSnCiAgICBlbmRab29tQWRkOiBmdW5jdGlvbiBlbmRab29tQWRkKGUpIHsKICAgICAgdGhpcy5zY2FsZS56b29tQWRkT24gPSBmYWxzZTsKICAgIH0sCiAgICAvLyDmjInpkq7mjInkuIvlvIDlp4vnvKnlsI8KICAgIHN0YXJ0Wm9vbVN1YjogZnVuY3Rpb24gc3RhcnRab29tU3ViKGUpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB2YXIgc2NhbGUgPSB0aGlzLnNjYWxlOwogICAgICBzY2FsZS56b29tU3ViT24gPSB0cnVlOwoKICAgICAgdmFyIHpvb20gPSBmdW5jdGlvbiB6b29tKCkgewogICAgICAgIGlmIChzY2FsZS56b29tU3ViT24pIHsKICAgICAgICAgIHZhciByYW5nZSA9IHNjYWxlLnJhbmdlIDw9IDAgPyAwIDogLS1zY2FsZS5yYW5nZTsKCiAgICAgICAgICBfdGhpczguem9vbUltZyhyYW5nZSk7CgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHpvb20oKTsKICAgICAgICAgIH0sIDYwKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB6b29tKCk7CiAgICB9LAogICAgLy8g5oyJ6ZKu5p2+5byA5oiW56e75byA5Y+W5raI57yp5bCPCiAgICBlbmRab29tU3ViOiBmdW5jdGlvbiBlbmRab29tU3ViKGUpIHsKICAgICAgdmFyIHNjYWxlID0gdGhpcy5zY2FsZTsKICAgICAgc2NhbGUuem9vbVN1Yk9uID0gZmFsc2U7CiAgICB9LAogICAgem9vbUNoYW5nZTogZnVuY3Rpb24gem9vbUNoYW5nZShlKSB7CiAgICAgIHRoaXMuem9vbUltZyhlLnRhcmdldC52YWx1ZSk7CiAgICB9LAogICAgLy8g57yp5pS+5Y6f5Zu+CiAgICB6b29tSW1nOiBmdW5jdGlvbiB6b29tSW1nKG5ld1JhbmdlKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdmFyIHNvdXJjZUltZ01hc2tpbmcgPSB0aGlzLnNvdXJjZUltZ01hc2tpbmcsCiAgICAgICAgICBzY2FsZSA9IHRoaXMuc2NhbGU7CiAgICAgIHZhciBtYXhXaWR0aCA9IHNjYWxlLm1heFdpZHRoLAogICAgICAgICAgbWF4SGVpZ2h0ID0gc2NhbGUubWF4SGVpZ2h0LAogICAgICAgICAgbWluV2lkdGggPSBzY2FsZS5taW5XaWR0aCwKICAgICAgICAgIG1pbkhlaWdodCA9IHNjYWxlLm1pbkhlaWdodCwKICAgICAgICAgIHdpZHRoID0gc2NhbGUud2lkdGgsCiAgICAgICAgICBoZWlnaHQgPSBzY2FsZS5oZWlnaHQsCiAgICAgICAgICB4ID0gc2NhbGUueCwKICAgICAgICAgIHkgPSBzY2FsZS55OwogICAgICB2YXIgc2ltID0gc291cmNlSW1nTWFza2luZzsgLy8g6JKZ54mI5a696auYCgogICAgICB2YXIgc1dpZHRoID0gc2ltLndpZHRoOwogICAgICB2YXIgc0hlaWdodCA9IHNpbS5oZWlnaHQ7IC8vIOaWsOWuvemrmAoKICAgICAgdmFyIG5XaWR0aCA9IG1pbldpZHRoICsgKG1heFdpZHRoIC0gbWluV2lkdGgpICogbmV3UmFuZ2UgLyAxMDA7CiAgICAgIHZhciBuSGVpZ2h0ID0gbWluSGVpZ2h0ICsgKG1heEhlaWdodCAtIG1pbkhlaWdodCkgKiBuZXdSYW5nZSAvIDEwMDsgLy8g5paw5Z2Q5qCH77yI5qC55o2u6JKZ54mI5Lit5b+D54K557yp5pS+77yJCgogICAgICB2YXIgblggPSBzV2lkdGggLyAyIC0gbldpZHRoIC8gd2lkdGggKiAoc1dpZHRoIC8gMiAtIHgpOwogICAgICB2YXIgblkgPSBzSGVpZ2h0IC8gMiAtIG5IZWlnaHQgLyBoZWlnaHQgKiAoc0hlaWdodCAvIDIgLSB5KTsgLy8g5Yik5pat5paw5Z2Q5qCH5piv5ZCm6LaF6L+H6JKZ54mI6ZmQ5Yi2CgogICAgICBpZiAoblggPiAwKSB7CiAgICAgICAgblggPSAwOwogICAgICB9CgogICAgICBpZiAoblkgPiAwKSB7CiAgICAgICAgblkgPSAwOwogICAgICB9CgogICAgICBpZiAoblggPCBzV2lkdGggLSBuV2lkdGgpIHsKICAgICAgICBuWCA9IHNXaWR0aCAtIG5XaWR0aDsKICAgICAgfQoKICAgICAgaWYgKG5ZIDwgc0hlaWdodCAtIG5IZWlnaHQpIHsKICAgICAgICBuWSA9IHNIZWlnaHQgLSBuSGVpZ2h0OwogICAgICB9IC8vIOi1i+WAvOWkhOeQhgoKCiAgICAgIHNjYWxlLnggPSBuWDsKICAgICAgc2NhbGUueSA9IG5ZOwogICAgICBzY2FsZS53aWR0aCA9IG5XaWR0aDsKICAgICAgc2NhbGUuaGVpZ2h0ID0gbkhlaWdodDsKICAgICAgc2NhbGUucmFuZ2UgPSBuZXdSYW5nZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHNjYWxlLnJhbmdlID09PSBuZXdSYW5nZSkgewogICAgICAgICAgX3RoaXM5LmNyZWF0ZUltZygpOwogICAgICAgIH0KICAgICAgfSwgMzAwKTsKICAgIH0sCiAgICAvLyDnlJ/miJDpnIDmsYLlm77niYcKICAgIGNyZWF0ZUltZzogZnVuY3Rpb24gY3JlYXRlSW1nKGUpIHsKICAgICAgdmFyIG1pbWUgPSB0aGlzLm1pbWUsCiAgICAgICAgICBzb3VyY2VJbWcgPSB0aGlzLnNvdXJjZUltZywKICAgICAgICAgIF90aGlzJHNjYWxlID0gdGhpcy5zY2FsZSwKICAgICAgICAgIHggPSBfdGhpcyRzY2FsZS54LAogICAgICAgICAgeSA9IF90aGlzJHNjYWxlLnksCiAgICAgICAgICB3aWR0aCA9IF90aGlzJHNjYWxlLndpZHRoLAogICAgICAgICAgaGVpZ2h0ID0gX3RoaXMkc2NhbGUuaGVpZ2h0LAogICAgICAgICAgZGVncmVlID0gX3RoaXMkc2NhbGUuZGVncmVlLAogICAgICAgICAgc2NhbGUgPSB0aGlzLnNvdXJjZUltZ01hc2tpbmcuc2NhbGU7CiAgICAgIHZhciBjYW52YXMgPSB0aGlzLiRyZWZzLmNhbnZhczsKICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwoKICAgICAgaWYgKGUpIHsKICAgICAgICAvLyDlj5bmtojpvKDmoIfmjInkuIvnp7vliqjnirbmgIEKICAgICAgICB0aGlzLnNvdXJjZUltZ01vdXNlRG93bi5vbiA9IGZhbHNlOwogICAgICB9CgogICAgICBjYW52YXMud2lkdGggPSB0aGlzLndpZHRoOwogICAgICBjYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7CiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpOyAvLyDlsIbpgI/mmI7ljLrln5/orr7nva7kuLrnmb3oibLlupXovrkKCiAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7CiAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7CiAgICAgIGN0eC50cmFuc2xhdGUodGhpcy53aWR0aCAqIDAuNSwgdGhpcy5oZWlnaHQgKiAwLjUpOwogICAgICBjdHgucm90YXRlKE1hdGguUEkgKiBkZWdyZWUgLyAxODApOwogICAgICBjdHgudHJhbnNsYXRlKC10aGlzLndpZHRoICogMC41LCAtdGhpcy5oZWlnaHQgKiAwLjUpOwogICAgICBjdHguZHJhd0ltYWdlKHNvdXJjZUltZywgeCAvIHNjYWxlLCB5IC8gc2NhbGUsIHdpZHRoIC8gc2NhbGUsIGhlaWdodCAvIHNjYWxlKTsKICAgICAgdGhpcy5jcmVhdGVJbWdVcmwgPSBjYW52YXMudG9EYXRhVVJMKG1pbWUpOwogICAgfSwKICAgIHByZXBhcmVVcGxvYWQ6IGZ1bmN0aW9uIHByZXBhcmVVcGxvYWQoKSB7CiAgICAgIHZhciB1cmwgPSB0aGlzLnVybCwKICAgICAgICAgIGNyZWF0ZUltZ1VybCA9IHRoaXMuY3JlYXRlSW1nVXJsLAogICAgICAgICAgZmllbGQgPSB0aGlzLmZpZWxkLAogICAgICAgICAga2kgPSB0aGlzLmtpOwogICAgICB0aGlzLiRlbWl0KCdjcm9wLXN1Y2Nlc3MnLCBjcmVhdGVJbWdVcmwsIGZpZWxkLCBraSk7CgogICAgICBpZiAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycgJiYgdXJsKSB7CiAgICAgICAgdGhpcy51cGxvYWQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm9mZigpOwogICAgICB9CiAgICB9LAogICAgLy8g5LiK5Lyg5Zu+54mHCiAgICB1cGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZCgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdmFyIGxhbmcgPSB0aGlzLmxhbmcsCiAgICAgICAgICBpbWdGb3JtYXQgPSB0aGlzLmltZ0Zvcm1hdCwKICAgICAgICAgIG1pbWUgPSB0aGlzLm1pbWUsCiAgICAgICAgICB1cmwgPSB0aGlzLnVybCwKICAgICAgICAgIHBhcmFtcyA9IHRoaXMucGFyYW1zLAogICAgICAgICAgZmllbGQgPSB0aGlzLmZpZWxkLAogICAgICAgICAga2kgPSB0aGlzLmtpLAogICAgICAgICAgY3JlYXRlSW1nVXJsID0gdGhpcy5jcmVhdGVJbWdVcmw7CiAgICAgIHZhciBmbURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm1EYXRhLmFwcGVuZChmaWVsZCwgZGF0YTJibG9iKGNyZWF0ZUltZ1VybCwgbWltZSksIGZpZWxkICsgJy4nICsgaW1nRm9ybWF0KTsgLy8g5re75Yqg5YW25LuW5Y+C5pWwCgogICAgICBpZiAoX3R5cGVvZihwYXJhbXMpID09PSAnb2JqZWN0JyAmJiBwYXJhbXMpIHsKICAgICAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goZnVuY3Rpb24gKGspIHsKICAgICAgICAgIGZtRGF0YS5hcHBlbmQoaywgcGFyYW1zW2tdKTsKICAgICAgICB9KTsKICAgICAgfSAvLyDnm5HlkKzov5vluqblm57osIMKICAgICAgLy8gY29uc3QgdXBsb2FkUHJvZ3Jlc3MgPSAoZXZlbnQpID0+IHsKICAgICAgLy8gICBpZiAoZXZlbnQubGVuZ3RoQ29tcHV0YWJsZSkgewogICAgICAvLyAgICAgdGhpcy5wcm9ncmVzcyA9IDEwMCAqIE1hdGgucm91bmQoZXZlbnQubG9hZGVkKSAvIGV2ZW50LnRvdGFsCiAgICAgIC8vICAgfQogICAgICAvLyB9CiAgICAgIC8vIOS4iuS8oOaWh+S7tgoKCiAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgdGhpcy5sb2FkaW5nID0gMTsKICAgICAgdGhpcy5zZXRTdGVwKDMpOwogICAgICByZXF1ZXN0KHsKICAgICAgICB1cmw6IHVybCwKICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICBkYXRhOiBmbURhdGEKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzRGF0YSkgewogICAgICAgIF90aGlzMTAubG9hZGluZyA9IDI7CgogICAgICAgIF90aGlzMTAuJGVtaXQoJ2Nyb3AtdXBsb2FkLXN1Y2Nlc3MnLCByZXNEYXRhLmRhdGEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgaWYgKF90aGlzMTAudmFsdWUpIHsKICAgICAgICAgIF90aGlzMTAubG9hZGluZyA9IDM7CiAgICAgICAgICBfdGhpczEwLmhhc0Vycm9yID0gdHJ1ZTsKICAgICAgICAgIF90aGlzMTAuZXJyb3JNc2cgPSBsYW5nLmZhaWw7CgogICAgICAgICAgX3RoaXMxMC4kZW1pdCgnY3JvcC11cGxvYWQtZmFpbCcsIGVyciwgZmllbGQsIGtpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNsb3NlSGFuZGxlcjogZnVuY3Rpb24gY2xvc2VIYW5kbGVyKGUpIHsKICAgICAgaWYgKHRoaXMudmFsdWUgJiYgKGUua2V5ID09PSAnRXNjYXBlJyB8fCBlLmtleUNvZGUgPT09IDI3KSkgewogICAgICAgIHRoaXMub2ZmKCk7CiAgICAgIH0KICAgIH0KICB9Cn07"},null]}