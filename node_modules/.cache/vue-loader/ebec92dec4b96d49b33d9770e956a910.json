{"remainingRequest":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\data\\git\\vue-admin\\vue-element-admin\\src\\components\\Dropzone\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\src\\components\\Dropzone\\index.vue","mtime":1636272798131},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRHJvcHpvbmUgZnJvbSAnZHJvcHpvbmUnDQppbXBvcnQgJ2Ryb3B6b25lL2Rpc3QvZHJvcHpvbmUuY3NzJw0KLy8gaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdhcGkvcWluaXUnOw0KDQpEcm9wem9uZS5hdXRvRGlzY292ZXIgPSBmYWxzZQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiB7DQogICAgaWQ6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgfSwNCiAgICB1cmw6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgfSwNCiAgICBjbGlja2FibGU6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlDQogICAgfSwNCiAgICBkZWZhdWx0TXNnOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAn5LiK5Lyg5Zu+54mHJw0KICAgIH0sDQogICAgYWNjZXB0ZWRGaWxlczogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJycNCiAgICB9LA0KICAgIHRodW1ibmFpbEhlaWdodDogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdDogMjAwDQogICAgfSwNCiAgICB0aHVtYm5haWxXaWR0aDogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdDogMjAwDQogICAgfSwNCiAgICBzaG93UmVtb3ZlTGluazogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUNCiAgICB9LA0KICAgIG1heEZpbGVzaXplOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0OiAyDQogICAgfSwNCiAgICBtYXhGaWxlczogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdDogMw0KICAgIH0sDQogICAgYXV0b1Byb2Nlc3NRdWV1ZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUNCiAgICB9LA0KICAgIHVzZUN1c3RvbURyb3B6b25lT3B0aW9uczogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICBkZWZhdWx0SW1nOiB7DQogICAgICBkZWZhdWx0OiAnJywNCiAgICAgIHR5cGU6IFtTdHJpbmcsIEFycmF5XQ0KICAgIH0sDQogICAgY291bGRQYXN0ZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkcm9wem9uZTogJycsDQogICAgICBpbml0T25jZTogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBkZWZhdWx0SW1nKHZhbCkgew0KICAgICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgdGhpcy5pbml0T25jZSA9IGZhbHNlDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLmluaXRPbmNlKSByZXR1cm4NCiAgICAgIHRoaXMuaW5pdEltYWdlcyh2YWwpDQogICAgICB0aGlzLmluaXRPbmNlID0gZmFsc2UNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpDQogICAgY29uc3Qgdm0gPSB0aGlzDQogICAgdGhpcy5kcm9wem9uZSA9IG5ldyBEcm9wem9uZShlbGVtZW50LCB7DQogICAgICBjbGlja2FibGU6IHRoaXMuY2xpY2thYmxlLA0KICAgICAgdGh1bWJuYWlsV2lkdGg6IHRoaXMudGh1bWJuYWlsV2lkdGgsDQogICAgICB0aHVtYm5haWxIZWlnaHQ6IHRoaXMudGh1bWJuYWlsSGVpZ2h0LA0KICAgICAgbWF4RmlsZXM6IHRoaXMubWF4RmlsZXMsDQogICAgICBtYXhGaWxlc2l6ZTogdGhpcy5tYXhGaWxlc2l6ZSwNCiAgICAgIGRpY3RSZW1vdmVGaWxlOiAnUmVtb3ZlJywNCiAgICAgIGFkZFJlbW92ZUxpbmtzOiB0aGlzLnNob3dSZW1vdmVMaW5rLA0KICAgICAgYWNjZXB0ZWRGaWxlczogdGhpcy5hY2NlcHRlZEZpbGVzLA0KICAgICAgYXV0b1Byb2Nlc3NRdWV1ZTogdGhpcy5hdXRvUHJvY2Vzc1F1ZXVlLA0KICAgICAgZGljdERlZmF1bHRNZXNzYWdlOiAnPGkgc3R5bGU9Im1hcmdpbi10b3A6IDNlbTtkaXNwbGF5OiBpbmxpbmUtYmxvY2siIGNsYXNzPSJtYXRlcmlhbC1pY29ucyI+JyArIHRoaXMuZGVmYXVsdE1zZyArICc8L2k+PGJyPkRyb3AgZmlsZXMgaGVyZSB0byB1cGxvYWQnLA0KICAgICAgZGljdE1heEZpbGVzRXhjZWVkZWQ6ICflj6rog73kuIDkuKrlm74nLA0KICAgICAgcHJldmlld1RlbXBsYXRlOiAnPGRpdiBjbGFzcz0iZHotcHJldmlldyBkei1maWxlLXByZXZpZXciPiAgPGRpdiBjbGFzcz0iZHotaW1hZ2UiIHN0eWxlPSJ3aWR0aDonICsgdGhpcy50aHVtYm5haWxXaWR0aCArICdweDtoZWlnaHQ6JyArIHRoaXMudGh1bWJuYWlsSGVpZ2h0ICsgJ3B4IiA+PGltZyBzdHlsZT0id2lkdGg6JyArIHRoaXMudGh1bWJuYWlsV2lkdGggKyAncHg7aGVpZ2h0OicgKyB0aGlzLnRodW1ibmFpbEhlaWdodCArICdweCIgZGF0YS1kei10aHVtYm5haWwgLz48L2Rpdj4gIDxkaXYgY2xhc3M9ImR6LWRldGFpbHMiPjxkaXYgY2xhc3M9ImR6LXNpemUiPjxzcGFuIGRhdGEtZHotc2l6ZT48L3NwYW4+PC9kaXY+IDxkaXYgY2xhc3M9ImR6LXByb2dyZXNzIj48c3BhbiBjbGFzcz0iZHotdXBsb2FkIiBkYXRhLWR6LXVwbG9hZHByb2dyZXNzPjwvc3Bhbj48L2Rpdj4gIDxkaXYgY2xhc3M9ImR6LWVycm9yLW1lc3NhZ2UiPjxzcGFuIGRhdGEtZHotZXJyb3JtZXNzYWdlPjwvc3Bhbj48L2Rpdj4gIDxkaXYgY2xhc3M9ImR6LXN1Y2Nlc3MtbWFyayI+IDxpIGNsYXNzPSJtYXRlcmlhbC1pY29ucyI+ZG9uZTwvaT4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJkei1lcnJvci1tYXJrIj48aSBjbGFzcz0ibWF0ZXJpYWwtaWNvbnMiPmVycm9yPC9pPjwvZGl2PjwvZGl2PicsDQogICAgICBpbml0KCkgew0KICAgICAgICBjb25zdCB2YWwgPSB2bS5kZWZhdWx0SW1nDQogICAgICAgIGlmICghdmFsKSByZXR1cm4NCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkgew0KICAgICAgICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSByZXR1cm4NCiAgICAgICAgICB2YWwubWFwKCh2LCBpKSA9PiB7DQogICAgICAgICAgICBjb25zdCBtb2NrRmlsZSA9IHsgbmFtZTogJ25hbWUnICsgaSwgc2l6ZTogMTIzNDUsIHVybDogdiB9DQogICAgICAgICAgICB0aGlzLm9wdGlvbnMuYWRkZWRmaWxlLmNhbGwodGhpcywgbW9ja0ZpbGUpDQogICAgICAgICAgICB0aGlzLm9wdGlvbnMudGh1bWJuYWlsLmNhbGwodGhpcywgbW9ja0ZpbGUsIHYpDQogICAgICAgICAgICBtb2NrRmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkei1zdWNjZXNzJykNCiAgICAgICAgICAgIG1vY2tGaWxlLnByZXZpZXdFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2R6LWNvbXBsZXRlJykNCiAgICAgICAgICAgIHZtLmluaXRPbmNlID0gZmFsc2UNCiAgICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgICAgfSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjb25zdCBtb2NrRmlsZSA9IHsgbmFtZTogJ25hbWUnLCBzaXplOiAxMjM0NSwgdXJsOiB2YWwgfQ0KICAgICAgICAgIHRoaXMub3B0aW9ucy5hZGRlZGZpbGUuY2FsbCh0aGlzLCBtb2NrRmlsZSkNCiAgICAgICAgICB0aGlzLm9wdGlvbnMudGh1bWJuYWlsLmNhbGwodGhpcywgbW9ja0ZpbGUsIHZhbCkNCiAgICAgICAgICBtb2NrRmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkei1zdWNjZXNzJykNCiAgICAgICAgICBtb2NrRmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkei1jb21wbGV0ZScpDQogICAgICAgICAgdm0uaW5pdE9uY2UgPSBmYWxzZQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgYWNjZXB0OiAoZmlsZSwgZG9uZSkgPT4gew0KICAgICAgICAvKiDkuIPniZsqLw0KICAgICAgICAvLyBjb25zdCB0b2tlbiA9IHRoaXMuJHN0b3JlLmdldHRlcnMudG9rZW47DQogICAgICAgIC8vIGdldFRva2VuKHRva2VuKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgLy8gICBmaWxlLnRva2VuID0gcmVzcG9uc2UuZGF0YS5xaW5pdV90b2tlbjsNCiAgICAgICAgLy8gICBmaWxlLmtleSA9IHJlc3BvbnNlLmRhdGEucWluaXVfa2V5Ow0KICAgICAgICAvLyAgIGZpbGUudXJsID0gcmVzcG9uc2UuZGF0YS5xaW5pdV91cmw7DQogICAgICAgIC8vICAgZG9uZSgpOw0KICAgICAgICAvLyB9KQ0KICAgICAgICBkb25lKCkNCiAgICAgIH0sDQogICAgICBzZW5kaW5nOiAoZmlsZSwgeGhyLCBmb3JtRGF0YSkgPT4gew0KICAgICAgICAvLyBmb3JtRGF0YS5hcHBlbmQoJ3Rva2VuJywgZmlsZS50b2tlbik7DQogICAgICAgIC8vIGZvcm1EYXRhLmFwcGVuZCgna2V5JywgZmlsZS5rZXkpOw0KICAgICAgICB2bS5pbml0T25jZSA9IGZhbHNlDQogICAgICB9DQogICAgfSkNCg0KICAgIGlmICh0aGlzLmNvdWxkUGFzdGUpIHsNCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgdGhpcy5wYXN0ZUltZykNCiAgICB9DQoNCiAgICB0aGlzLmRyb3B6b25lLm9uKCdzdWNjZXNzJywgZmlsZSA9PiB7DQogICAgICB2bS4kZW1pdCgnZHJvcHpvbmUtc3VjY2VzcycsIGZpbGUsIHZtLmRyb3B6b25lLmVsZW1lbnQpDQogICAgfSkNCiAgICB0aGlzLmRyb3B6b25lLm9uKCdhZGRlZGZpbGUnLCBmaWxlID0+IHsNCiAgICAgIHZtLiRlbWl0KCdkcm9wem9uZS1maWxlQWRkZWQnLCBmaWxlKQ0KICAgIH0pDQogICAgdGhpcy5kcm9wem9uZS5vbigncmVtb3ZlZGZpbGUnLCBmaWxlID0+IHsNCiAgICAgIHZtLiRlbWl0KCdkcm9wem9uZS1yZW1vdmVkRmlsZScsIGZpbGUpDQogICAgfSkNCiAgICB0aGlzLmRyb3B6b25lLm9uKCdlcnJvcicsIChmaWxlLCBlcnJvciwgeGhyKSA9PiB7DQogICAgICB2bS4kZW1pdCgnZHJvcHpvbmUtZXJyb3InLCBmaWxlLCBlcnJvciwgeGhyKQ0KICAgIH0pDQogICAgdGhpcy5kcm9wem9uZS5vbignc3VjY2Vzc211bHRpcGxlJywgKGZpbGUsIGVycm9yLCB4aHIpID0+IHsNCiAgICAgIHZtLiRlbWl0KCdkcm9wem9uZS1zdWNjZXNzbXVsdGlwbGUnLCBmaWxlLCBlcnJvciwgeGhyKQ0KICAgIH0pDQogIH0sDQogIGRlc3Ryb3llZCgpIHsNCiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwYXN0ZScsIHRoaXMucGFzdGVJbWcpDQogICAgdGhpcy5kcm9wem9uZS5kZXN0cm95KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHJlbW92ZUFsbEZpbGVzKCkgew0KICAgICAgdGhpcy5kcm9wem9uZS5yZW1vdmVBbGxGaWxlcyh0cnVlKQ0KICAgIH0sDQogICAgcHJvY2Vzc1F1ZXVlKCkgew0KICAgICAgdGhpcy5kcm9wem9uZS5wcm9jZXNzUXVldWUoKQ0KICAgIH0sDQogICAgcGFzdGVJbWcoZXZlbnQpIHsNCiAgICAgIGNvbnN0IGl0ZW1zID0gKGV2ZW50LmNsaXBib2FyZERhdGEgfHwgZXZlbnQub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhKS5pdGVtcw0KICAgICAgaWYgKGl0ZW1zWzBdLmtpbmQgPT09ICdmaWxlJykgew0KICAgICAgICB0aGlzLmRyb3B6b25lLmFkZEZpbGUoaXRlbXNbMF0uZ2V0QXNGaWxlKCkpDQogICAgICB9DQogICAgfSwNCiAgICBpbml0SW1hZ2VzKHZhbCkgew0KICAgICAgaWYgKCF2YWwpIHJldHVybg0KICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkgew0KICAgICAgICB2YWwubWFwKCh2LCBpKSA9PiB7DQogICAgICAgICAgY29uc3QgbW9ja0ZpbGUgPSB7IG5hbWU6ICduYW1lJyArIGksIHNpemU6IDEyMzQ1LCB1cmw6IHYgfQ0KICAgICAgICAgIHRoaXMuZHJvcHpvbmUub3B0aW9ucy5hZGRlZGZpbGUuY2FsbCh0aGlzLmRyb3B6b25lLCBtb2NrRmlsZSkNCiAgICAgICAgICB0aGlzLmRyb3B6b25lLm9wdGlvbnMudGh1bWJuYWlsLmNhbGwodGhpcy5kcm9wem9uZSwgbW9ja0ZpbGUsIHYpDQogICAgICAgICAgbW9ja0ZpbGUucHJldmlld0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHotc3VjY2VzcycpDQogICAgICAgICAgbW9ja0ZpbGUucHJldmlld0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHotY29tcGxldGUnKQ0KICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIH0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zdCBtb2NrRmlsZSA9IHsgbmFtZTogJ25hbWUnLCBzaXplOiAxMjM0NSwgdXJsOiB2YWwgfQ0KICAgICAgICB0aGlzLmRyb3B6b25lLm9wdGlvbnMuYWRkZWRmaWxlLmNhbGwodGhpcy5kcm9wem9uZSwgbW9ja0ZpbGUpDQogICAgICAgIHRoaXMuZHJvcHpvbmUub3B0aW9ucy50aHVtYm5haWwuY2FsbCh0aGlzLmRyb3B6b25lLCBtb2NrRmlsZSwgdmFsKQ0KICAgICAgICBtb2NrRmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkei1zdWNjZXNzJykNCiAgICAgICAgbW9ja0ZpbGUucHJldmlld0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHotY29tcGxldGUnKQ0KICAgICAgfQ0KICAgIH0NCg0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"index.vue","sourceRoot":"src/components/Dropzone","sourcesContent":["<template>\r\n  <div :id=\"id\" :ref=\"id\" :action=\"url\" class=\"dropzone\">\r\n    <input type=\"file\" name=\"file\">\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Dropzone from 'dropzone'\r\nimport 'dropzone/dist/dropzone.css'\r\n// import { getToken } from 'api/qiniu';\r\n\r\nDropzone.autoDiscover = false\r\n\r\nexport default {\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    url: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    clickable: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    defaultMsg: {\r\n      type: String,\r\n      default: '上传图片'\r\n    },\r\n    acceptedFiles: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    thumbnailHeight: {\r\n      type: Number,\r\n      default: 200\r\n    },\r\n    thumbnailWidth: {\r\n      type: Number,\r\n      default: 200\r\n    },\r\n    showRemoveLink: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    maxFilesize: {\r\n      type: Number,\r\n      default: 2\r\n    },\r\n    maxFiles: {\r\n      type: Number,\r\n      default: 3\r\n    },\r\n    autoProcessQueue: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    useCustomDropzoneOptions: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    defaultImg: {\r\n      default: '',\r\n      type: [String, Array]\r\n    },\r\n    couldPaste: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      dropzone: '',\r\n      initOnce: true\r\n    }\r\n  },\r\n  watch: {\r\n    defaultImg(val) {\r\n      if (val.length === 0) {\r\n        this.initOnce = false\r\n        return\r\n      }\r\n      if (!this.initOnce) return\r\n      this.initImages(val)\r\n      this.initOnce = false\r\n    }\r\n  },\r\n  mounted() {\r\n    const element = document.getElementById(this.id)\r\n    const vm = this\r\n    this.dropzone = new Dropzone(element, {\r\n      clickable: this.clickable,\r\n      thumbnailWidth: this.thumbnailWidth,\r\n      thumbnailHeight: this.thumbnailHeight,\r\n      maxFiles: this.maxFiles,\r\n      maxFilesize: this.maxFilesize,\r\n      dictRemoveFile: 'Remove',\r\n      addRemoveLinks: this.showRemoveLink,\r\n      acceptedFiles: this.acceptedFiles,\r\n      autoProcessQueue: this.autoProcessQueue,\r\n      dictDefaultMessage: '<i style=\"margin-top: 3em;display: inline-block\" class=\"material-icons\">' + this.defaultMsg + '</i><br>Drop files here to upload',\r\n      dictMaxFilesExceeded: '只能一个图',\r\n      previewTemplate: '<div class=\"dz-preview dz-file-preview\">  <div class=\"dz-image\" style=\"width:' + this.thumbnailWidth + 'px;height:' + this.thumbnailHeight + 'px\" ><img style=\"width:' + this.thumbnailWidth + 'px;height:' + this.thumbnailHeight + 'px\" data-dz-thumbnail /></div>  <div class=\"dz-details\"><div class=\"dz-size\"><span data-dz-size></span></div> <div class=\"dz-progress\"><span class=\"dz-upload\" data-dz-uploadprogress></span></div>  <div class=\"dz-error-message\"><span data-dz-errormessage></span></div>  <div class=\"dz-success-mark\"> <i class=\"material-icons\">done</i> </div>  <div class=\"dz-error-mark\"><i class=\"material-icons\">error</i></div></div>',\r\n      init() {\r\n        const val = vm.defaultImg\r\n        if (!val) return\r\n        if (Array.isArray(val)) {\r\n          if (val.length === 0) return\r\n          val.map((v, i) => {\r\n            const mockFile = { name: 'name' + i, size: 12345, url: v }\r\n            this.options.addedfile.call(this, mockFile)\r\n            this.options.thumbnail.call(this, mockFile, v)\r\n            mockFile.previewElement.classList.add('dz-success')\r\n            mockFile.previewElement.classList.add('dz-complete')\r\n            vm.initOnce = false\r\n            return true\r\n          })\r\n        } else {\r\n          const mockFile = { name: 'name', size: 12345, url: val }\r\n          this.options.addedfile.call(this, mockFile)\r\n          this.options.thumbnail.call(this, mockFile, val)\r\n          mockFile.previewElement.classList.add('dz-success')\r\n          mockFile.previewElement.classList.add('dz-complete')\r\n          vm.initOnce = false\r\n        }\r\n      },\r\n      accept: (file, done) => {\r\n        /* 七牛*/\r\n        // const token = this.$store.getters.token;\r\n        // getToken(token).then(response => {\r\n        //   file.token = response.data.qiniu_token;\r\n        //   file.key = response.data.qiniu_key;\r\n        //   file.url = response.data.qiniu_url;\r\n        //   done();\r\n        // })\r\n        done()\r\n      },\r\n      sending: (file, xhr, formData) => {\r\n        // formData.append('token', file.token);\r\n        // formData.append('key', file.key);\r\n        vm.initOnce = false\r\n      }\r\n    })\r\n\r\n    if (this.couldPaste) {\r\n      document.addEventListener('paste', this.pasteImg)\r\n    }\r\n\r\n    this.dropzone.on('success', file => {\r\n      vm.$emit('dropzone-success', file, vm.dropzone.element)\r\n    })\r\n    this.dropzone.on('addedfile', file => {\r\n      vm.$emit('dropzone-fileAdded', file)\r\n    })\r\n    this.dropzone.on('removedfile', file => {\r\n      vm.$emit('dropzone-removedFile', file)\r\n    })\r\n    this.dropzone.on('error', (file, error, xhr) => {\r\n      vm.$emit('dropzone-error', file, error, xhr)\r\n    })\r\n    this.dropzone.on('successmultiple', (file, error, xhr) => {\r\n      vm.$emit('dropzone-successmultiple', file, error, xhr)\r\n    })\r\n  },\r\n  destroyed() {\r\n    document.removeEventListener('paste', this.pasteImg)\r\n    this.dropzone.destroy()\r\n  },\r\n  methods: {\r\n    removeAllFiles() {\r\n      this.dropzone.removeAllFiles(true)\r\n    },\r\n    processQueue() {\r\n      this.dropzone.processQueue()\r\n    },\r\n    pasteImg(event) {\r\n      const items = (event.clipboardData || event.originalEvent.clipboardData).items\r\n      if (items[0].kind === 'file') {\r\n        this.dropzone.addFile(items[0].getAsFile())\r\n      }\r\n    },\r\n    initImages(val) {\r\n      if (!val) return\r\n      if (Array.isArray(val)) {\r\n        val.map((v, i) => {\r\n          const mockFile = { name: 'name' + i, size: 12345, url: v }\r\n          this.dropzone.options.addedfile.call(this.dropzone, mockFile)\r\n          this.dropzone.options.thumbnail.call(this.dropzone, mockFile, v)\r\n          mockFile.previewElement.classList.add('dz-success')\r\n          mockFile.previewElement.classList.add('dz-complete')\r\n          return true\r\n        })\r\n      } else {\r\n        const mockFile = { name: 'name', size: 12345, url: val }\r\n        this.dropzone.options.addedfile.call(this.dropzone, mockFile)\r\n        this.dropzone.options.thumbnail.call(this.dropzone, mockFile, val)\r\n        mockFile.previewElement.classList.add('dz-success')\r\n        mockFile.previewElement.classList.add('dz-complete')\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .dropzone {\r\n        border: 2px solid #E5E5E5;\r\n        font-family: 'Roboto', sans-serif;\r\n        color: #777;\r\n        transition: background-color .2s linear;\r\n        padding: 5px;\r\n    }\r\n\r\n    .dropzone:hover {\r\n        background-color: #F6F6F6;\r\n    }\r\n\r\n    i {\r\n        color: #CCC;\r\n    }\r\n\r\n    .dropzone .dz-image img {\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    .dropzone input[name='file'] {\r\n        display: none;\r\n    }\r\n\r\n    .dropzone .dz-preview .dz-image {\r\n        border-radius: 0px;\r\n    }\r\n\r\n    .dropzone .dz-preview:hover .dz-image img {\r\n        transform: none;\r\n        filter: none;\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    .dropzone .dz-preview .dz-details {\r\n        bottom: 0px;\r\n        top: 0px;\r\n        color: white;\r\n        background-color: rgba(33, 150, 243, 0.8);\r\n        transition: opacity .2s linear;\r\n        text-align: left;\r\n    }\r\n\r\n    .dropzone .dz-preview .dz-details .dz-filename span, .dropzone .dz-preview .dz-details .dz-size span {\r\n        background-color: transparent;\r\n    }\r\n\r\n    .dropzone .dz-preview .dz-details .dz-filename:not(:hover) span {\r\n        border: none;\r\n    }\r\n\r\n    .dropzone .dz-preview .dz-details .dz-filename:hover span {\r\n        background-color: transparent;\r\n        border: none;\r\n    }\r\n\r\n    .dropzone .dz-preview .dz-remove {\r\n        position: absolute;\r\n        z-index: 30;\r\n        color: white;\r\n        margin-left: 15px;\r\n        padding: 10px;\r\n        top: inherit;\r\n        bottom: 15px;\r\n        border: 2px white solid;\r\n        text-decoration: none;\r\n        text-transform: uppercase;\r\n        font-size: 0.8rem;\r\n        font-weight: 800;\r\n        letter-spacing: 1.1px;\r\n        opacity: 0;\r\n    }\r\n\r\n    .dropzone .dz-preview:hover .dz-remove {\r\n        opacity: 1;\r\n    }\r\n\r\n    .dropzone .dz-preview .dz-success-mark, .dropzone .dz-preview .dz-error-mark {\r\n        margin-left: -40px;\r\n        margin-top: -50px;\r\n    }\r\n\r\n    .dropzone .dz-preview .dz-success-mark i, .dropzone .dz-preview .dz-error-mark i {\r\n        color: white;\r\n        font-size: 5rem;\r\n    }\r\n</style>\r\n"]}]}