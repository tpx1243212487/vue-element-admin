{"remainingRequest":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\data\\git\\vue-admin\\vue-element-admin\\src\\components\\MarkdownEditor\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\src\\components\\MarkdownEditor\\index.vue","mtime":1636272798135},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\data\\git\\vue-admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQovLyBkZXBzIGZvciBlZGl0b3INCmltcG9ydCAnY29kZW1pcnJvci9saWIvY29kZW1pcnJvci5jc3MnIC8vIGNvZGVtaXJyb3INCmltcG9ydCAndHVpLWVkaXRvci9kaXN0L3R1aS1lZGl0b3IuY3NzJyAvLyBlZGl0b3IgdWkNCmltcG9ydCAndHVpLWVkaXRvci9kaXN0L3R1aS1lZGl0b3ItY29udGVudHMuY3NzJyAvLyBlZGl0b3IgY29udGVudA0KDQppbXBvcnQgRWRpdG9yIGZyb20gJ3R1aS1lZGl0b3InDQppbXBvcnQgZGVmYXVsdE9wdGlvbnMgZnJvbSAnLi9kZWZhdWx0LW9wdGlvbnMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ01hcmtkb3duRWRpdG9yJywNCiAgcHJvcHM6IHsNCiAgICB2YWx1ZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJycNCiAgICB9LA0KICAgIGlkOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gJ21hcmtkb3duLWVkaXRvci0nICsgK25ldyBEYXRlKCkgKyAoKE1hdGgucmFuZG9tKCkgKiAxMDAwKS50b0ZpeGVkKDApICsgJycpDQogICAgICB9DQogICAgfSwNCiAgICBvcHRpb25zOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gZGVmYXVsdE9wdGlvbnMNCiAgICAgIH0NCiAgICB9LA0KICAgIG1vZGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICdtYXJrZG93bicNCiAgICB9LA0KICAgIGhlaWdodDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgcmVxdWlyZWQ6IGZhbHNlLA0KICAgICAgZGVmYXVsdDogJzMwMHB4Jw0KICAgIH0sDQogICAgbGFuZ3VhZ2U6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwNCiAgICAgIGRlZmF1bHQ6ICdlbl9VUycgLy8gaHR0cHM6Ly9naXRodWIuY29tL25obmVudC90dWkuZWRpdG9yL3RyZWUvbWFzdGVyL3NyYy9qcy9sYW5ncw0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZWRpdG9yOiBudWxsDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGVkaXRvck9wdGlvbnMoKSB7DQogICAgICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIHRoaXMub3B0aW9ucykNCiAgICAgIG9wdGlvbnMuaW5pdGlhbEVkaXRUeXBlID0gdGhpcy5tb2RlDQogICAgICBvcHRpb25zLmhlaWdodCA9IHRoaXMuaGVpZ2h0DQogICAgICBvcHRpb25zLmxhbmd1YWdlID0gdGhpcy5sYW5ndWFnZQ0KICAgICAgcmV0dXJuIG9wdGlvbnMNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgdmFsdWUobmV3VmFsdWUsIHByZVZhbHVlKSB7DQogICAgICBpZiAobmV3VmFsdWUgIT09IHByZVZhbHVlICYmIG5ld1ZhbHVlICE9PSB0aGlzLmVkaXRvci5nZXRWYWx1ZSgpKSB7DQogICAgICAgIHRoaXMuZWRpdG9yLnNldFZhbHVlKG5ld1ZhbHVlKQ0KICAgICAgfQ0KICAgIH0sDQogICAgbGFuZ3VhZ2UodmFsKSB7DQogICAgICB0aGlzLmRlc3Ryb3lFZGl0b3IoKQ0KICAgICAgdGhpcy5pbml0RWRpdG9yKCkNCiAgICB9LA0KICAgIGhlaWdodChuZXdWYWx1ZSkgew0KICAgICAgdGhpcy5lZGl0b3IuaGVpZ2h0KG5ld1ZhbHVlKQ0KICAgIH0sDQogICAgbW9kZShuZXdWYWx1ZSkgew0KICAgICAgdGhpcy5lZGl0b3IuY2hhbmdlTW9kZShuZXdWYWx1ZSkNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0RWRpdG9yKCkNCiAgfSwNCiAgZGVzdHJveWVkKCkgew0KICAgIHRoaXMuZGVzdHJveUVkaXRvcigpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0RWRpdG9yKCkgew0KICAgICAgdGhpcy5lZGl0b3IgPSBuZXcgRWRpdG9yKHsNCiAgICAgICAgZWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpLA0KICAgICAgICAuLi50aGlzLmVkaXRvck9wdGlvbnMNCiAgICAgIH0pDQogICAgICBpZiAodGhpcy52YWx1ZSkgew0KICAgICAgICB0aGlzLmVkaXRvci5zZXRWYWx1ZSh0aGlzLnZhbHVlKQ0KICAgICAgfQ0KICAgICAgdGhpcy5lZGl0b3Iub24oJ2NoYW5nZScsICgpID0+IHsNCiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLmVkaXRvci5nZXRWYWx1ZSgpKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGRlc3Ryb3lFZGl0b3IoKSB7DQogICAgICBpZiAoIXRoaXMuZWRpdG9yKSByZXR1cm4NCiAgICAgIHRoaXMuZWRpdG9yLm9mZignY2hhbmdlJykNCiAgICAgIHRoaXMuZWRpdG9yLnJlbW92ZSgpDQogICAgfSwNCiAgICBzZXRWYWx1ZSh2YWx1ZSkgew0KICAgICAgdGhpcy5lZGl0b3Iuc2V0VmFsdWUodmFsdWUpDQogICAgfSwNCiAgICBnZXRWYWx1ZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRWYWx1ZSgpDQogICAgfSwNCiAgICBzZXRIdG1sKHZhbHVlKSB7DQogICAgICB0aGlzLmVkaXRvci5zZXRIdG1sKHZhbHVlKQ0KICAgIH0sDQogICAgZ2V0SHRtbCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRIdG1sKCkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/MarkdownEditor","sourcesContent":["<template>\r\n  <div :id=\"id\" />\r\n</template>\r\n\r\n<script>\r\n// deps for editor\r\nimport 'codemirror/lib/codemirror.css' // codemirror\r\nimport 'tui-editor/dist/tui-editor.css' // editor ui\r\nimport 'tui-editor/dist/tui-editor-contents.css' // editor content\r\n\r\nimport Editor from 'tui-editor'\r\nimport defaultOptions from './default-options'\r\n\r\nexport default {\r\n  name: 'MarkdownEditor',\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    id: {\r\n      type: String,\r\n      required: false,\r\n      default() {\r\n        return 'markdown-editor-' + +new Date() + ((Math.random() * 1000).toFixed(0) + '')\r\n      }\r\n    },\r\n    options: {\r\n      type: Object,\r\n      default() {\r\n        return defaultOptions\r\n      }\r\n    },\r\n    mode: {\r\n      type: String,\r\n      default: 'markdown'\r\n    },\r\n    height: {\r\n      type: String,\r\n      required: false,\r\n      default: '300px'\r\n    },\r\n    language: {\r\n      type: String,\r\n      required: false,\r\n      default: 'en_US' // https://github.com/nhnent/tui.editor/tree/master/src/js/langs\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      editor: null\r\n    }\r\n  },\r\n  computed: {\r\n    editorOptions() {\r\n      const options = Object.assign({}, defaultOptions, this.options)\r\n      options.initialEditType = this.mode\r\n      options.height = this.height\r\n      options.language = this.language\r\n      return options\r\n    }\r\n  },\r\n  watch: {\r\n    value(newValue, preValue) {\r\n      if (newValue !== preValue && newValue !== this.editor.getValue()) {\r\n        this.editor.setValue(newValue)\r\n      }\r\n    },\r\n    language(val) {\r\n      this.destroyEditor()\r\n      this.initEditor()\r\n    },\r\n    height(newValue) {\r\n      this.editor.height(newValue)\r\n    },\r\n    mode(newValue) {\r\n      this.editor.changeMode(newValue)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initEditor()\r\n  },\r\n  destroyed() {\r\n    this.destroyEditor()\r\n  },\r\n  methods: {\r\n    initEditor() {\r\n      this.editor = new Editor({\r\n        el: document.getElementById(this.id),\r\n        ...this.editorOptions\r\n      })\r\n      if (this.value) {\r\n        this.editor.setValue(this.value)\r\n      }\r\n      this.editor.on('change', () => {\r\n        this.$emit('input', this.editor.getValue())\r\n      })\r\n    },\r\n    destroyEditor() {\r\n      if (!this.editor) return\r\n      this.editor.off('change')\r\n      this.editor.remove()\r\n    },\r\n    setValue(value) {\r\n      this.editor.setValue(value)\r\n    },\r\n    getValue() {\r\n      return this.editor.getValue()\r\n    },\r\n    setHtml(value) {\r\n      this.editor.setHtml(value)\r\n    },\r\n    getHtml() {\r\n      return this.editor.getHtml()\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}